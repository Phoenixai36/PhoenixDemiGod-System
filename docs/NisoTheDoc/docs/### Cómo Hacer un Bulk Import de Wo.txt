### Cómo Hacer un Bulk Import de Workflows en n8n Local

¡Hola! Como developer obsesivo y creativo con sistemas en Barcelona, sé que buscas eficiencia máxima para importar múltiples workflows de una vez en tu instancia local de n8n. Basado en nuestra conversación anterior sobre plantillas de Google Sheets, asumiré que quieres importar en bulk archivos JSON (por ejemplo, descargados de Drive o exportados). Te guío paso a paso para un "bulk import" usando el CLI de n8n, que es ideal para hosts locales (self-hosted). Esto te permite procesar directorios enteros de archivos JSON sin importar uno por uno[1][2].

#### Requisitos Previos
- **Instalación de n8n local**: Asegúrate de que n8n esté corriendo en tu máquina (via npm o Docker). Si usas Docker, ejecuta comandos dentro del contenedor[1].
- **Archivos JSON listos**: Ten todos los workflows como archivos .json en un directorio. Por ejemplo, descarga los JSON de tu Google Sheet (como mencionamos antes) y guárdalos en una carpeta local, digamos `/ruta/a/tus/workflows/`.
- **Acceso CLI**: Si instalaste via npm, el comando `n8n` está disponible directamente. En Docker: `docker exec -u node -it  `[1].
- **Backup recomendado**: Antes de importar, haz un backup de tu base de datos actual para evitar sobreescrituras (usa `n8n export:workflow --backup --output=/ruta/backup/`)[1][3].

Nota: Si tus workflows tienen IDs duplicados, podrían sobrescribirse. Edita los JSON para cambiar IDs si es necesario[1][4].

#### Paso a Paso: Bulk Import Usando CLI
El comando clave es `n8n import:workflow` con la bandera `--separate` para importar múltiples archivos de un directorio. Aquí va el proceso[1][2][3]:

1. **Prepara el directorio**: Asegúrate de que todos los archivos JSON estén en una carpeta sin subdirectorios. Ejemplo: `/home/tuusuario/workflows/`. Cada archivo debe ser un workflow válido (puedes validar uno manualmente importándolo via UI).

2. **Ejecuta el comando de importación**:
   - Para npm directo:  
     ```
     n8n import:workflow --separate --input=/ruta/a/tus/workflows/
     ```
   - Para Docker:  
     ```
     docker exec -u node -it  n8n import:workflow --separate --input=/ruta/a/tus/workflows/
     ```
     (Asegúrate de que la ruta sea accesible dentro del contenedor; usa volúmenes si es necesario[5].)

3. **Verifica el resultado**: 
   - El CLI te dirá algo como "Successfully imported X workflows"[6]. Abre n8n en tu navegador (normalmente `http://localhost:5678`) y chequea la lista de workflows.
   - Si hay errores (ej. "workflows.map is not a function" o problemas con PostgreSQL), reinicia n8n y verifica la base de datos[7]. Para SQLite vs. PostgreSQL, confirma tu config en `.env`[7].

4. **Configura credenciales y activa**: Después del import, edita workflows para agregar credenciales (no se importan automáticamente por seguridad)[8][9]. Activa con `n8n update:workflow --id= --active=true` o via UI[1].

Si importas desde Google Drive (como en tu sheet), automatiza la descarga primero: crea un workflow en n8n con nodos Google Drive para bajar JSONs en bulk y luego ejecuta el CLI[10].

#### Consejos para Troubleshooting
- **Errores comunes**: Si falla con "Cannot read properties of undefined", actualiza n8n a la versión más reciente (hoy es 16 de julio de 2025, chequea updates)[4]. Para imports grandes, divide el directorio en sub-lotes si son más de 20-30 archivos[6].
- **Problemas de IDs o duplicados**: Usa `--userId` o `--projectId` para asignar a usuarios/proyectos específicos en entornos multi-user[1][3].
- **Si no funciona el CLI**: Importa manualmente via UI (menú > Import from File), pero para bulk, CLI es más rápido[8][2]. Si usas PostgreSQL, verifica conexiones antes[7].
- **Seguridad en Barcelona**: Recuerda GDPR si manejas datos personales; en hosts locales, encripta tu DB[9].

#### Ideas Avanzadas para Tu Perfil Creativo
Como ciber-obsesivo con desarrollo de sistemas, integra esto en un flujo mayor: 
- Crea un script bash que descargue de Google Sheets, convierta a JSON y ejecute el import automáticamente.
- Combina con Git: Exporta/Importa workflows a un repo para versionado (usa `n8n export:workflow --backup`)[11][12].
- Escala: Si creces, migra a queue mode para imports paralelos en entornos locales[13].

Si algo falla o necesitas ayuda con un workflow específico (ej. el de "AI Agent" de tu sheet), dime el detalle y lo refinamos. ¡Esto potenciará tus automatizaciones creativas al máximo! ¿Qué workflows estás importando?

[1] https://docs.n8n.io/hosting/cli-commands/
[2] https://docs.n8n.io/workflows/export-import/
[3] https://slashpage.com/n8n-guide/5r398nmn9zgg82vwje7y?lang=en&tl=en
[4] https://github.com/n8n-io/n8n/issues/7881
[5] https://community.n8n.io/t/csv-import-from-local-folder/80425
[6] https://community.n8n.io/t/n8n-import-workflow-separate-does-not-import-all-json-files/20502
[7] https://community.n8n.io/t/cli-import-failing-with-postgresql/77860
[8] https://docs.n8n.io/courses/level-one/chapter-6/
[9] https://www.youtube.com/watch?v=MD4_RgcyCNk
[10] https://community.n8n.io/t/bulk-import-workflows-from-google-drive-after-server-migration/123455
[11] https://community.n8n.io/t/migrating-from-n8n-workflows-from-local-instance-to-my-n8n-hosted-on-railway/39590
[12] https://community.n8n.io/t/can-t-import-any-workflow-from-https-n8n-io-workflows-to-my-self-hosted-license/31308
[13] https://www.youtube.com/watch?v=FyXjwv_oZuc
[14] https://www.youtube.com/watch?v=8m_yJa4mY90
[15] https://community.n8n.io/t/import-workflow-through-cli-in-n8n/34122
[16] https://community.n8n.io/t/import-and-stitch-together-a-process-of-several-workflows/26488
[17] https://community.n8n.io/t/error-when-using-cli-to-import-workflows/49584
[18] https://community.n8n.io/t/issues-with-importing-and-saving-workflows/19636
[19] https://community.n8n.io/t/update-n8n-cli-workflows-command-import-export-to-support-folders/108012
[20] https://community.n8n.io/t/i-would-like-to-import-the-sql-database-of-n8n-from-my-own-server-to-the-service-provided-by-n8n/28702